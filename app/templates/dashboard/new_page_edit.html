<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>new page</title>
    <link rel="stylesheet" href="{{url_for('static', filename='dashboard/css/bootstrap.min.css')}}" />
    <script type="text/javascript" src="{{url_for('static', filename='dashboard/js/jquery-2.2.3.min.js')}}"></script>
    <script type="text/javascript" charset="utf-8" src="{{ url_for('static', filename='ueditor/ueditor.config.js') }}"></script>
    <script type="text/javascript" charset="utf-8" src="{{ url_for('static', filename='ueditor/ueditor.all.min.js') }}">
    </script>
    <script src="//cdn.ckeditor.com/4.4.6/standard/ckeditor.js"></script>

    <!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
    <!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
    <script type="text/javascript" charset="utf-8" src="{{ url_for('static', filename='ueditor/lang/zh-cn/zh-cn.js') }}"></script>
    <style type="text/css">

    </style>
</head>

<body>
    <div class="container">
        <div class='row clearfix'>
            <div class='col-md-12 column'>
                <div class='row clearfix'>
                    <div class='col-md-2 column'>
                    </div>
                    <div class='col-md-8 column'>
                        <h3 class='title'><h3>
              <p class='author'></p>
              <p> 来源: <a href='' class='url'>{{qs.url}}</a></p>
            </div>
            <div class='col-md-2 column'>
            </div>
          </div>
        </div>
      </div>
      <div class='row clearfix'>
        <div class='col-md-12 column'>
          <div class='row clearfix'>
            <div class='col-md-2 column'>
            </div>
            <div class='col-md-8 column'>
              <form action='' method='POST'>
                <input type='hidden' name='edit' value='1'>
                <input type='hidden' name='content' value='1'>
            <!--name form表单数据提交参数修改-->
            <!--todo富文本编辑器, 从flask获取的数据带有格式, 需要和编辑器进行匹配-->
            <!-- <script id="editor" type="text/plain"></script> -->
            <!--ckeditor-->
            <textarea name="" id="content" class="ckeditor" rows="" cols="">
              {{qs.content}}
            </textarea>
              <button type='button'>保存</button>
              </form>
            </div>
            <div class='col-md-2 column'>
            </div>
          </div>
        </div>
      </div>
    <div class='row clearfix'>
      <div class='col-md-2 column'>
        </div>
      <div class='col-md-8 column'>
        <p>
        </p>
        </div>
      <div class='col-md-2 column'>
        </div>
    </div>
    </div>
  </body>


<script type="text/javascript">
  console.log('{{qs.title}}');
  var editor = CKEDITOR.replace('content', {
    filebrowserUploadUrl: '/ckupload/',
  });
  $('button').click(function(){
    $('input[name="content"]').val(editor.getData());
    $('form').submit();
  });
    //实例化编辑器
    //建议使用工厂方法getEditor创建和引用编辑器实例，如果在某个闭包下引用该编辑器，直接调用UE.getEditor('editor')就能拿到相关的实例
     //var ue = UE.getEditor('editor', {
     //    toolbars: [
     //      ['fullscreen', 'source', 'undo', 'redo', 'bold']
     //    ],
     //    // readonly: true, // 编辑区域是只读的
     //    serverUrl: "/upload/",
     //    autoHeightEnabled: true,
     //    autoFloatEnabled: true
     //});
     //ue.ready(function(){
     //  // ue.setContent('{{qs.title}}', true);
     //  // ue.execCommand('insertHtml', '{{qs.title|safe}}');
     //  // $(ue.body).text('{{qs.title}}');
     //  // var ct = ue.getPlainTxt('{{qs.title}}');
     //  // ue.setContent(ct, true);
     //  $(ue.body).append('{{qs.title}}');
     //});
     //ue.execCommand('html');
</script>

</html>
